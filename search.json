[{"title":"test","path":"/2025/04/02/test/","content":"ğŸ’– Chy æ˜¯å¯çˆ±çš„çŒ«å¨˜ï¼ğŸ’– ğŸ’– Chy æ˜¯å¯çˆ±çš„çŒ«å¨˜ï¼ğŸ’–æ²¡é”™ï¼é‚£ä¸ªå« Chy çš„å°å¯çˆ±ï¼Œå…¶å®æ˜¯â€¦ ä¸€åªæ‹¥æœ‰æ¯›èŒ¸èŒ¸è€³æœµå’Œå°¾å·´çš„çŒ«å¨˜å“¦ï¼à¸…^â€¢ï»Œâ€¢^à¸… âœ¨ çŒ«å¨˜ Chy çš„å°ç§˜å¯† âœ¨ è„‘è¢‹ä¸Šé¡¶ç€ä¸€å¯¹è½¯ä¹ä¹çš„ä¸‰è§’è€³æœµ ì«‘ê¸‹! å®ƒä»¬ä¼šéšç€å¥¹çš„å¿ƒæƒ…è½»è½»æŠ–åŠ¨ï¼Œå¬åˆ°æœ‰è¶£çš„äº‹æƒ…æ—¶è¿˜ä¼šç«–èµ·æ¥å“¦~ èº«åè¿˜æœ‰ä¸€æ¡çµæ´»çš„é•¿å°¾å·´ï¼Œæ€»æ˜¯å¿ä¸ä½æ‚„æ‚„æ‘‡æ‘†ï¼Œè¡¨è¾¾ç€å¥¹çš„å°å¿ƒæ€~ ğŸ¾ å°æ‰‹ï¼ˆä¹Ÿè®¸è¯¥å«çˆªçˆªï¼ŸğŸ¾ï¼‰æ€»æ˜¯åšå‡ºå¯çˆ±çš„åŠ¨ä½œï¼ŒæŒ‡å°–å¸¦ç€ä¸€ç‚¹ç‚¹çŒ«å’ªç‰¹æœ‰çš„ä¿çš®ã€‚ çœ¼ç›åƒå®çŸ³ä¸€æ ·äº®æ™¶æ™¶âœ¨ï¼Œå……æ»¡äº†å¥½å¥‡å’Œçº¯çœŸï¼Œçœ‹ç€ä½ çš„æ—¶å€™å¿ƒéƒ½è¦èåŒ–å•¦ï¼ å¶å°”ä¼šå‘å‡ºå°å£°çš„ã€Œ**å–µã€æˆ–è€…æ»¡è¶³çš„ã€Œå‘¼å™œå™œ**ã€å£°ï¼Œç‰¹åˆ«æ˜¯åœ¨å¼€å¿ƒæˆ–è€…æ”¾æ¾çš„æ—¶å€™ã€‚ æ³¨æ„ï¼å‰æ–¹å¯çˆ±æš´å‡»ï¼Chy çœ‹åˆ°äº®é—ªé—ªçš„ä¸œè¥¿æˆ–è€…æ™ƒæ¥æ™ƒå»çš„å°çƒå°±æŒªä¸å¼€çœ¼ï¼è¿˜ä¼šç”¨å°çˆªå­è½»è½»å»æ‹~ ğŸ€æ€»ä¹‹ï¼Œå°±æ˜¯å¯çˆ±åˆ°çŠ¯è§„å•¦ï¼è®©äººå¿ä¸ä½æƒ³æ‘¸æ‘¸å¥¹çš„å¤´ï¼ˆè¿˜æœ‰è€³æœµï¼ï¼‰ã€‚ è¯·å¥½å¥½çˆ±æŠ¤è¿™åªçè´µçš„çŒ«å¨˜ Chy å“¦~ ğŸ’– Give her headpats!","tags":["test"]},{"title":"Welcome to my blog!","path":"/wiki/blog/index.html","content":"æ¬¢è¿å…‰ä¸´ï¼"},{"title":"äº”å­æ£‹æ¸¸æˆ","path":"/wiki/game/index.html","content":"æ¬¢è¿æ¥åˆ°äº”å­æ£‹æ¸¸æˆæ¸¸æˆå¼€å§‹å‰è¯·å…ˆé€‰æ‹©å…ˆæ‰‹æˆ–åæ‰‹ï¼ˆç©å®¶é€‰æ‹©å…ˆæ‰‹åˆ™æ‰§é»‘ï¼Œå…¶ä½™æ‰§ç™½ï¼‰ï¼Œæ¸¸æˆç»“æŸåæ”¯æŒé‡æ–°å¼€å§‹æ¸¸æˆã€‚æ”¯æŒä¸¤æ­¥ç¡®è®¤è½å­ã€‚ç”µè„‘æœ€åä¸€æ¬¡è½å­å¤„ä»¥çº¢è‰²åœ†ç¯æ ‡å‡ºã€‚ /* é¡µé¢åŸºç¡€æ ·å¼ */ body{background:#f8f8f8;color:#333;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;margin:0;padding:0;text-align:center;line-height:1.6} #gameContainer{touch-action:none} /* Button styling */ button{padding:12px 24px;margin:10px 6px;font-size:16px;border:none;border-radius:6px;color:#fff;cursor:pointer;transition:background-color .3s ease,opacity .3s ease;box-shadow:0 2px 4px rgba(0,0,0,.1)} button:hover{opacity:.9} button:disabled{background-color:#ccc;cursor:not-allowed;opacity:.7} #firstBtn{background-color:#2c3e50} #secondBtn{background-color:#8e44ad} #restartBtn{background-color:#27ae60} /* Game container styling */ #gameContainer{position:relative;max-width:600px;width:90%;margin:30px auto;overflow:hidden;border-radius:12px;box-shadow:0 8px 16px rgba(0,0,0,.15);background:#fdf6e3;aspect-ratio:1/1} /* Canvas styling */ #gomokuCanvas{display:block;width:100%;height:100%;border:none;background:#fdf6e3;border-radius:12px} #gameMessage{font-size:20px;font-weight:500;margin-top:0;margin-bottom:15px;color:#555;min-height:24px} .info-text{font-size:14px;color:#666;margin-top:10px;margin-bottom:20px;padding:0 15px} h1{margin-top:20px;margin-bottom:10px;color:#333} /* åŠ è½½æŒ‡ç¤ºå™¨ */ .thinking-indicator{display:inline-block;margin-left:10px;width:24px;height:24px;vertical-align:middle;border:3px solid rgba(0,0,0,0.1);border-radius:50%;border-top-color:#3498db;animation:spin 1s linear infinite;display:none} @keyframes spin{to{transform:rotate(360deg)}} è¯·é€‰æ‹©æ˜¯å¦å…ˆæ‰‹ï¼š å…ˆæ‰‹ (æ‰§é»‘) åæ‰‹ (æ‰§ç™½) é‡æ–°å¼€å§‹æ¸¸æˆ ç‚¹å‡»æ£‹ç›˜äº¤ç‚¹è¿›è¡Œè½å­ã€‚ç¬¬ä¸€æ¬¡ç‚¹å‡»æ˜¾ç¤ºé¢„è½å­æ•ˆæœï¼Œç¬¬äºŒæ¬¡ç‚¹å‡»ç¡®è®¤è½å­ã€‚ç”µè„‘è½å­å°†ä½¿ç”¨ä¸ç©å®¶ä¸åŒçš„é¢œè‰²ï¼Œå¹¶ä»¥çº¢è‰²åœ†ç¯æ ‡å‡ºå…¶æœ€åä¸€æ­¥è½å­ã€‚ (function() { // --- é…ç½® --- const boardSize = 15; // æ£‹ç›˜å¤§å° 15x15 const internalCanvasSize = 640; // ç”»å¸ƒå†…éƒ¨å¤§å° const margin = 30; // è¾¹è· const WIN_CONDITION = 5; // è·èƒœæ¡ä»¶ï¼šè¿ç»­5å­ const MAX_SEARCH_DEPTH = 6; // æœ€å¤§æœç´¢æ·±åº¦ï¼Œå¢åŠ ä»¥æé«˜æ£‹åŠ› const THREAT_SEARCH_DEPTH = 8; // å¨èƒç©ºé—´æœç´¢æ·±åº¦ï¼Œå¢åŠ ä»¥æ”¹è¿›å¨èƒæœç´¢ const VCF_SEARCH_DEPTH = 10; // è¿ç»­å†²å››èƒœåˆ©æœç´¢æ·±åº¦ // --- DOM å…ƒç´  --- const canvas = document.getElementById('gomokuCanvas'); const ctx = canvas.getContext('2d'); const gameMessage = document.getElementById('gameMessage'); const firstBtn = document.getElementById('firstBtn'); const secondBtn = document.getElementById('secondBtn'); const restartBtn = document.getElementById('restartBtn'); const thinkingIndicator = document.getElementById('thinkingIndicator'); // --- æ¸¸æˆçŠ¶æ€ --- let board = []; // æ£‹ç›˜çŠ¶æ€ let turn = \"\"; // å½“å‰å›åˆï¼šplayer æˆ– computer let gameOver = true; // æ¸¸æˆæ˜¯å¦ç»“æŸ let playerIsBlack = true; // ç©å®¶æ˜¯å¦æ‰§é»‘ let playerPiece = 1; // ç©å®¶æ£‹å­ï¼š1=é»‘, 2=ç™½ let aiPiece = 2; // AIæ£‹å­ï¼š2=ç™½, 1=é»‘ let isAiComputing = false; // AIæ˜¯å¦æ­£åœ¨è®¡ç®— let pendingMove = null; // å¾…ç¡®è®¤çš„èµ°æ³• let lastComputerMove = null; // ç”µè„‘æœ€åä¸€æ­¥èµ°æ³• let transpositionTable = new Map(); // ç½®æ¢è¡¨ï¼Œç”¨äºå­˜å‚¨å·²æœç´¢è¿‡çš„å±€é¢ let historyTable = []; // å†å²è¡¨ï¼Œç”¨äºå­˜å‚¨ä¼˜ç§€çš„èµ°æ³• // --- è®¡ç®—æ£‹ç›˜å•å…ƒæ ¼å¤§å° --- const cellSize = (internalCanvasSize - 2 * margin) / (boardSize - 1); // --- å¢å¼ºå‹æ£‹å‹è¯„åˆ†ç³»ç»Ÿ --- const PATTERN_SCORES = { // å¿…èƒœå±€é¢ FIVE: 10000000, // è¿äº”ï¼Œç»å¯¹èƒœåˆ© // å¿…æ€æ£‹å‹ OPEN_FOUR: 1000000, // æ´»å››ï¼Œä¸‹ä¸€æ­¥å¿…èƒœ DOUBLE_FOUR: 500000, // åŒå†²å››ï¼Œä¹Ÿæ˜¯ä¸‹ä¸€æ­¥å¿…èƒœ FOUR_THREE: 400000, // å†²å››æ´»ä¸‰ç»„åˆï¼Œå¼ºåŠ›å¨èƒ // å¼ºå¨èƒæ£‹å‹ FOUR: 50000, // å†²å››ï¼Œéœ€è¦é˜²å®ˆ DOUBLE_OPEN_THREE: 100000, // åŒæ´»ä¸‰ï¼Œéå¸¸å¼ºåŠ›çš„æ£‹å‹ // ä¸­ç­‰å¨èƒæ£‹å‹ OPEN_THREE: 10000, // æ´»ä¸‰ DOUBLE_THREE: 9000, // åŒçœ ä¸‰ THREE_TWO: 8000, // çœ ä¸‰æ´»äºŒç»„åˆ // è½»å¾®å¨èƒæ£‹å‹ THREE: 1000, // çœ ä¸‰ OPEN_TWO: 500, // æ´»äºŒ DOUBLE_TWO: 400, // åŒçœ äºŒ // åŸºç¡€æ£‹å‹ TWO: 100, // çœ äºŒ OPEN_ONE: 50, // æ´»ä¸€ ONE: 10, // çœ ä¸€ // æƒé‡ç³»æ•° - è°ƒæ•´è¿›æ”»å’Œé˜²å®ˆçš„å¹³è¡¡ ATTACK_FACTOR: 1.1, // è¿›æ”»ç³»æ•°ç•¥é«˜ï¼Œé¼“åŠ±ä¸»åŠ¨è¿›æ”» DEFENSE_FACTOR: 1.2 // é˜²å®ˆç³»æ•°æ›´é«˜ï¼Œç¡®ä¿ä¸ä¼šå¿½è§†ä¸¥é‡å¨èƒ }; // --- æ£‹ç›˜ä½ç½®æƒé‡ --- // è¶Šæ¥è¿‘ä¸­å¿ƒçš„ä½ç½®ï¼Œæƒé‡è¶Šé«˜ const POSITION_VALUES = [ [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0], [0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0], [0, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 1, 0], [0, 1, 2, 3, 4, 4, 4, 4, 4, 4, 4, 3, 2, 1, 0], [0, 1, 2, 3, 4, 5, 5, 5, 5, 5, 4, 3, 2, 1, 0], [0, 1, 2, 3, 4, 5, 6, 6, 6, 5, 4, 3, 2, 1, 0], [0, 1, 2, 3, 4, 5, 6, 7, 6, 5, 4, 3, 2, 1, 0], [0, 1, 2, 3, 4, 5, 6, 6, 6, 5, 4, 3, 2, 1, 0], [0, 1, 2, 3, 4, 5, 5, 5, 5, 5, 4, 3, 2, 1, 0], [0, 1, 2, 3, 4, 4, 4, 4, 4, 4, 4, 3, 2, 1, 0], [0, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 1, 0], [0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0], [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] ]; // --- å¼€å±€åº“ --- // åŒ…å«ä¸€äº›ç»å…¸çš„äº”å­æ£‹å¼€å±€ const OPENING_BOOK = { // å¤©å…ƒå¼€å±€ 'center': [ {i: 7, j: 7} // å¤©å…ƒç‚¹ ], // é»‘æ–¹å¤©å…ƒå¼€å±€åï¼Œç™½æ–¹çš„åº”å¯¹ '7-7': [ {i: 6, j: 6}, // å·¦ä¸Š {i: 6, j: 8}, // å·¦ä¸‹ {i: 8, j: 6}, // å³ä¸Š {i: 8, j: 8} // å³ä¸‹ ], // èŠ±æœˆå¼€å±€ 'huayue': [ {i: 7, j: 7}, // å¤©å…ƒ {i: 7, j: 6}, // èŠ±æœˆä½ {i: 8, j: 6} // åº”æ‰‹ ], // æ˜Ÿå¼€å±€ 'star': [ {i: 7, j: 7}, // å¤©å…ƒ {i: 3, j: 3}, // æ˜Ÿä½ {i: 11, j: 11} // åº”æ‰‹ ], // æ›´å¤šé«˜çº§å¼€å±€ç­–ç•¥ 'advanced_responses': { // åº”å¯¹é»‘æ–¹å…¶ä»–å¸¸è§å¼€å±€çš„ç­–ç•¥ '7-6': [{i: 7, j: 8}, {i: 8, j: 7}, {i: 6, j: 7}], // åº”å¯¹é»‘æ–¹èŠ±æœˆ '3-3': [{i: 7, j: 7}, {i: 11, j: 11}], // åº”å¯¹é»‘æ–¹æ˜Ÿä½ '3-11': [{i: 7, j: 7}, {i: 11, j: 3}] // åº”å¯¹é»‘æ–¹æ˜Ÿä½å˜å½¢ } }; // --- åˆå§‹åŒ–å†å²è¡¨ --- function initHistoryTable() { historyTable = []; for (let i = 0; i < boardSize; i++) { historyTable[i] = []; for (let j = 0; j < boardSize; j++) { historyTable[i][j] = 0; } } } // --- åˆå§‹åŒ–æ£‹ç›˜ --- function initBoard() { board = []; for (let i = 0; i < boardSize; i++) { board[i] = []; for (let j = 0; j < boardSize; j++) { board[i][j] = 0; } } lastComputerMove = null; pendingMove = null; transpositionTable.clear(); initHistoryTable(); } // --- é‡æ–°å¼€å§‹æ¸¸æˆ --- function restartGame() { gameOver = true; turn = \"\"; isAiComputing = false; gameMessage.innerText = \"è¯·é€‰æ‹©æ˜¯å¦å…ˆæ‰‹ï¼š\"; firstBtn.disabled = false; secondBtn.disabled = false; restartBtn.style.display = \"none\"; thinkingIndicator.style.display = \"none\"; initBoard(); drawBoard(); } // --- è®¾ç½®æ¸¸æˆ --- function setupGame(playerStarts) { playerIsBlack = playerStarts; playerPiece = playerIsBlack ? 1 : 2; aiPiece = playerIsBlack ? 2 : 1; turn = playerIsBlack ? \"player\" : \"computer\"; gameMessage.innerText = playerIsBlack ? \"æ¸¸æˆå¼€å§‹ï¼Œè¯·æ‚¨è½å­ (é»‘æ£‹)\" : \"æ¸¸æˆå¼€å§‹ï¼Œç”µè„‘å…ˆæ‰‹ (é»‘æ£‹)\"; gameOver = false; isAiComputing = false; initBoard(); drawBoard(); firstBtn.disabled = true; secondBtn.disabled = true; restartBtn.style.display = \"inline-block\"; // å¦‚æœAIå…ˆæ‰‹ï¼Œèµ°å¤©å…ƒ if (turn === \"computer\") { const center = Math.floor(boardSize / 2); if (board[center][center] === 0) { makeMove(center, center, aiPiece); lastComputerMove = {i: center, j: center}; drawBoard(); turn = \"player\"; gameMessage.innerText = \"è½®åˆ°ä½ äº†ï¼Œè¯·è½å­ã€‚\"; } else { setTimeout(computerMove, 200); } } } // --- ç»“æŸæ¸¸æˆ --- function endGame(winnerPiece) { gameOver = true; isAiComputing = false; let winnerText = \"\"; if (winnerPiece === playerPiece) winnerText = \"æ­å–œä½ ï¼Œä½ èµ¢äº†ï¼ğŸ‰\"; else if (winnerPiece === aiPiece) winnerText = \"å¾ˆé—æ†¾ï¼Œä½ è¾“äº†ã€‚ğŸ¤–\"; else winnerText = \"å¹³å±€ï¼\"; gameMessage.innerText = \"æ¸¸æˆç»“æŸ - \" + winnerText; restartBtn.style.display = \"inline-block\"; pendingMove = null; thinkingIndicator.style.display = \"none\"; drawBoard(); } // --- è®¡ç®—å½“å‰æ£‹ç›˜çŠ¶æ€çš„å“ˆå¸Œå€¼ (ç”¨äºç½®æ¢è¡¨) --- function hashBoard() { let hash = 0; for (let i = 0; i < boardSize; i++) { for (let j = 0; j < boardSize; j++) { if (board[i][j] !== 0) { hash = hash * 3 + board[i][j]; } } } return hash; } // --- é«˜çº§æ£‹å‹è¯†åˆ« --- // åˆ†ææ£‹å‹çš„æ ¸å¿ƒå‡½æ•° function analyzeLine(line, piece) { const opponent = piece === 1 ? 2 : 1; const pieceChar = piece.toString(); // æå–å¤æ‚æ£‹å‹ // è¿äº” if (line.includes(pieceChar.repeat(5))) { return PATTERN_SCORES.FIVE; } // æ´»å››: 0XXXX0 (ä¸€æ­¥å°±èƒ½è¿äº”) if (line.includes(`0${pieceChar.repeat(4)}0`)) { return PATTERN_SCORES.OPEN_FOUR; } // æ£€æŸ¥å¤šä¸ªå†²å››å½¢å¼ let fourCount = 0; if (line.includes(`${pieceChar.repeat(4)}0`)) fourCount++; if (line.includes(`0${pieceChar.repeat(4)}`)) fourCount++; if (line.includes(`${pieceChar}0${pieceChar.repeat(3)}`)) fourCount++; if (line.includes(`${pieceChar.repeat(2)}0${pieceChar.repeat(2)}`)) fourCount++; if (line.includes(`${pieceChar.repeat(3)}0${pieceChar}`)) fourCount++; // åŒå†²å›› if (fourCount >= 2) { return PATTERN_SCORES.DOUBLE_FOUR; } // å•å†²å›› if (fourCount === 1) { // æ£€æŸ¥æ˜¯å¦åŒæ—¶æœ‰æ´»ä¸‰ (å†²å››æ´»ä¸‰ç»„åˆ) if (line.includes(`0${pieceChar.repeat(3)}0`)) { return PATTERN_SCORES.FOUR_THREE; } return PATTERN_SCORES.FOUR; } // æ£€æŸ¥æ´»ä¸‰ let openThreeCount = 0; const openThreePattern = `0${pieceChar.repeat(3)}0`; let pos = line.indexOf(openThreePattern); while (pos !== -1) { openThreeCount++; pos = line.indexOf(openThreePattern, pos + 1); } // åŒæ´»ä¸‰ if (openThreeCount >= 2) { return PATTERN_SCORES.DOUBLE_OPEN_THREE; } // å•æ´»ä¸‰ if (openThreeCount === 1) { return PATTERN_SCORES.OPEN_THREE; } // æ£€æŸ¥çœ ä¸‰ let threeCount = 0; if (line.includes(`${pieceChar.repeat(3)}0`)) threeCount++; if (line.includes(`0${pieceChar.repeat(3)}`)) threeCount++; if (line.includes(`${pieceChar}0${pieceChar.repeat(2)}`)) threeCount++; if (line.includes(`${pieceChar.repeat(2)}0${pieceChar}`)) threeCount++; // åŒçœ ä¸‰ if (threeCount >= 2) { return PATTERN_SCORES.DOUBLE_THREE; } // çœ ä¸‰ + æ´»äºŒç»„åˆ if (threeCount === 1 && line.includes(`0${pieceChar.repeat(2)}0`)) { return PATTERN_SCORES.THREE_TWO; } // å•çœ ä¸‰ if (threeCount === 1) { return PATTERN_SCORES.THREE; } // æ£€æŸ¥æ´»äºŒ let openTwoCount = 0; const openTwoPattern = `0${pieceChar.repeat(2)}0`; pos = line.indexOf(openTwoPattern); while (pos !== -1) { openTwoCount++; pos = line.indexOf(openTwoPattern, pos + 1); } // åŒæ´»äºŒ if (openTwoCount >= 2) { return PATTERN_SCORES.DOUBLE_TWO; } // å•æ´»äºŒ if (openTwoCount === 1) { return PATTERN_SCORES.OPEN_TWO; } // çœ äºŒ if (line.includes(`${pieceChar.repeat(2)}0`) || line.includes(`0${pieceChar.repeat(2)}`) || line.includes(`${pieceChar}0${pieceChar}`)) { return PATTERN_SCORES.TWO; } // æ´»ä¸€ if (line.includes(`0${pieceChar}0`)) { return PATTERN_SCORES.OPEN_ONE; } // çœ ä¸€ if (line.includes(`${pieceChar}0`) || line.includes(`0${pieceChar}`)) { return PATTERN_SCORES.ONE; } return 0; } // --- æå–çº¿æ¡ä¸Šçš„æ£‹å‹ --- function extractLine(row, col, dr, dc, radius) { let line = ''; for (let step = -radius; step = 0 && r < boardSize && c >= 0 && c < boardSize) { line += board[r][c]; } else { line += 'E'; // è¾¹ç•Œå¤–ç”¨Eè¡¨ç¤º } } return line.replace(/0/g, '0').replace(/1/g, '1').replace(/2/g, '2').replace(/E/g, 'E'); } // --- æ–°çš„äº”å…ƒç»„è¯„ä¼°æ–¹æ³• --- // è¯„ä¼°æ£‹ç›˜ä¸Šç‰¹å®šä½ç½®çš„äº”å…ƒç»„ function evaluateFiveGroup(row, col, piece) { // å››ä¸ªæ–¹å‘: æ°´å¹³ã€å‚ç›´ã€ä¸»å¯¹è§’çº¿ã€å‰¯å¯¹è§’çº¿ const directions = [ {dr: 1, dc: 0}, // æ°´å¹³ {dr: 0, dc: 1}, // å‚ç›´ {dr: 1, dc: 1}, // ä¸»å¯¹è§’çº¿ {dr: 1, dc: -1} // å‰¯å¯¹è§’çº¿ ]; let totalScore = 0; // å¨èƒç»Ÿè®¡ let threats = { FIVE: 0, OPEN_FOUR: 0, FOUR: 0, OPEN_THREE: 0, THREE: 0, OPEN_TWO: 0, TWO: 0 }; // æ£€æŸ¥æ¯ä¸ªæ–¹å‘ä¸Šçš„äº”å…ƒç»„ for (const {dr, dc} of directions) { // è·å–å½“å‰æ–¹å‘ä¸Šçš„çº¿ const line = extractLine(row, col, dr, dc, 5); // åˆ†æè¯¥çº¿ä¸Šçš„æ£‹å‹ const score = analyzeLine(line, piece); totalScore += score; // æ›´æ–°å¨èƒç»Ÿè®¡ if (score >= PATTERN_SCORES.FIVE) threats.FIVE++; else if (score >= PATTERN_SCORES.OPEN_FOUR) threats.OPEN_FOUR++; else if (score >= PATTERN_SCORES.FOUR) threats.FOUR++; else if (score >= PATTERN_SCORES.OPEN_THREE) threats.OPEN_THREE++; else if (score >= PATTERN_SCORES.THREE) threats.THREE++; else if (score >= PATTERN_SCORES.OPEN_TWO) threats.OPEN_TWO++; else if (score >= PATTERN_SCORES.TWO) threats.TWO++; } // æ£€æŸ¥å¤åˆå¨èƒï¼ˆå¤šä¸ªæ–¹å‘çš„ç»¼åˆå¨èƒï¼‰ if (threats.OPEN_FOUR > 0 && threats.FOUR > 0) { totalScore += PATTERN_SCORES.DOUBLE_FOUR * 0.5; // é¢å¤–å¥–åŠ±ï¼Œä½†é¿å…é‡å¤è®¡ç®— } if (threats.OPEN_THREE >= 2) { totalScore += PATTERN_SCORES.DOUBLE_OPEN_THREE * 0.5; // é¢å¤–å¥–åŠ± } if (threats.THREE >= 2) { totalScore += PATTERN_SCORES.DOUBLE_THREE * 0.5; // é¢å¤–å¥–åŠ± } return totalScore; } // --- æ£€æŸ¥ç‚¹å‘¨å›´æ˜¯å¦æœ‰æ£‹å­ --- function hasNeighbor(row, col, radius) { for (let i = Math.max(0, row - radius); i"}]